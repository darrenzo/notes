# ssh

- Secure Shell
- SSH 为建立在应用层基础上的安全协议
- SSH 是较可靠，专为远程登录会话和其他网络服务提供安全性的协议
- 利用 SSH 协议可以把所有传输的数据进行加密，有效防止远程管理过程中的信息泄露问题(中间人攻击、DNS欺骗和IP欺骗)
- 传输的数据是经过压缩的，所以可以加快传输的速度

## 两种安全验证

### 基于口令的安全验证

- 只要你知道自己帐号和口令，就可以登录到远程主机
- 所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器，容易受到中间人攻击

### 基于密匙的安全验证

- 把公用密匙放在需要访问的服务器上
- 当要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的公用密匙进行安全验证
- 服务器收到请求之后，对比服务器上公用密钥和发送来的密钥，如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件
- 客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器，验证通过，建立连接
- 整个登录的过程可能需要10秒

## ssh-agent

- 可以控制和保存公钥身份验证所使用的私钥的程序
- 当 ssh-add 把私钥交给 ssh-agent 来管理时,其他程序需要身份验证的时候都可以申请交给 ssh-agent 来完成整个认证过程
- 密钥登录常用操作

```shell
eval $(ssh-agent -s)
ssh-add ~/.ssh/user@git.reolink.com
```
